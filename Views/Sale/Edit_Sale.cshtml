@model List<eSalesPro.Models.Sale_Invoice>

@{
    var kamran = 0;
    var new_value = 0;
}


<body id="body-index" onload="Edit_Sale_Onload()">
    <div id="sticky-footer-wrap">
        @{
            decimal sum = 0;
        }
        @*-----------------Top Navigation Start---------------*@

        @{
            Html.RenderPartial("Top_Navigation_View");
        }

        @*-----------------Top Navigation End---------------*@

        <div class="container-fluid main-container">

            @*-----------------Side Navigation Start---------------*@
            <div class="row">
                @{
                    Html.RenderPartial("Side_Navigation_View");
                }
                @*-----------------Side Navigation End---------------*@



                @*-----------------Main Container Start---------------*@
                <div class="user-page-height">
                    <div class="bggg-img">
                        <div id="edit_invoice">



                            <form id="demo-form2" action="@Url.Action("Edit_Sale","Sale")" method="post" data-parsley-validate class="" enctype="multipart/form-data">

                                <input hidden type="text" value="-3" id="customer_list_edit_modal_value" />
                                @*<input hidden type="text" id="partial_net_id" name="partial_net_id" value="@ViewBag.invoice.Net_Price"/>
                                    <input hidden type="text" id="partial_vat_price_id" name="partial_vat_price_id" value="@ViewBag.invoice.VAT_20"/>
                                    <input hidden type="text" id="partial_gross_id" name="partial_gross_id" value="@ViewBag.invoice.Gross_Total"/>*@

                                <input hidden value="@Model.Count" />

                                <input hidden type="text" id="partial_net_sale_history" name="partial_net_id" />
                                <input hidden type="text" id="partial_vat_sale_history" name="partial_vat_price_id" />
                                <input hidden type="text" id="partial_gross_sale_history" name="partial_gross_id" />

                                <div class="col-md-12">

                                    @{
                                        Html.RenderPartial("Loader_Div");
                                    }

                                    <div class="empty-height"></div><div class="empty-height"></div>

                                    <div class="form-group pull-right mb-0 margin_right_6">
                                        <label class="width-134 pull-left mt-5" for="middle-name">Document Type</label>
                                        <div class="pull-left">
                                            <select id="language" value="@ViewBag.invoice.Document_Type.Id" oninput="run_invoice();" @*oninput="run_invoice();checkQuoteNumber()"*@ onblur="" name="document_type" class="select-class-color form-control border_black-1px width-145" style="background:#bcbcc5">
                                                <option value="@ViewBag.invoice.Document_Type.Id">@ViewBag.invoice.Document_Type.Type</option>

                                                @if (@ViewBag.invoice.Document_Type.Id == 1)
                                                {
                                                    foreach (var document in ViewBag.Document_Type)
                                                    {
                                                        if (document.Id != 2)
                                                        {
                                                            //continue; 
                                                            if (ViewBag.invoice.Document_Type.Id == document.Id)
                                                            {
                                                                continue;
                                                            }
                                                            <option value="@document.Id">@document.Type</option>
                                                        }

                                                    }
                                                }

                                                else if (@ViewBag.invoice.Document_Type.Id == 2)
                                                {
                                                    foreach (var document in ViewBag.Document_Type)
                                                    {
                                                            //continue;
                                                            if (ViewBag.invoice.Document_Type.Id == document.Id)
                                                            {
                                                                continue;
                                                            }
                                                            <option value="@document.Id">@document.Type</option>
                                                    }
                                                }

                                                else if (@ViewBag.invoice.Document_Type.Id == 3)
                                                {
                                                    foreach (var document in ViewBag.Document_Type)
                                                    {
                                                        if (document.Id != 2)
                                                        {
                                                            //continue;
                                                            if (ViewBag.invoice.Document_Type.Id == document.Id)
                                                            {
                                                                continue;
                                                            }
                                                            <option value="@document.Id">@document.Type</option>
                                                        }
                                                    }
                                                }
                                                

                                                

                                            </select>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="clearfix"></div>

                                <div id="invoice_id" class="hideDocument">
                                    <div class="">

                                        <div class="">



                                            <div class="col-md-4 pull-left">

                                                <h3 id="new_invoice_heading" class="bold mt-0">
                                                    Edit Invoice
                                                </h3>

                                                <h3 class="bold mt-0" id="new_quote_heading" style="display:none;">
                                                    Edit Quote
                                                </h3>

                                                <h3 class="bold mt-0" id="new_item_sale_heading" style="display:none;">
                                                    Edit Item Sale
                                                </h3>

                                                <div class="empty-height"></div><div class="empty-height"></div>




                                                <div class="col-md-6 pull-left">
                                                    <a href="#" data-toggle="modal" data-target="#CreateModal">
                                                        <span class=""><img src="~/img/images/add_customer.png" /></span><br />
                                                        <span class="bold">New Customer</span>

                                                    </a>
                                                </div>

                                                <div class="col-md-6 pull-left">
                                                    <a href="#" data-toggle="modal" data-dismiss="modal" data-target="#ExistingModal">
                                                        <span class=""><img src="~/img/images/search_customer.png" /></span><br />
                                                        <span class="bold">Existing Customer</span>
                                                    </a>
                                                </div>
                                                <div class="clearfix"></div>


                                            </div>





                                            <div class="col-md-2 pull-left pl-0 pr-0">
                                                <input type="text" name="exist_customer_idd" class="hidden" id="exist_customer_id" value="@ViewBag.invoice.Customer.Id" />
                                                <input type="text" name="credit_limit_input" class="hidden" id="credit_limit_input" value="@ViewBag.invoice.Customer.Credit_Limit"/>
                                                <ul class="list-style-type-custom">
                                                    <li id="type_customer" class="bold font-18 black-color">@ViewBag.invoice.Customer.Customer_Type.Type</li>
                                                    <li id="customer_name">@ViewBag.invoice.Customer.Name</li>
                                                    <li id="customer_address">@ViewBag.invoice.Customer.Billing_Street</li>
                                                    <li id="customer_postcode">@ViewBag.invoice.Customer.Billing_Postcode</li>
                                                    <li id="customer_phone">@ViewBag.invoice.Customer.phone</li>
                                                    <li id="customer_email">@ViewBag.invoice.Customer.Email</li>
                                                    <li id="customer_balance" class="hidden">@ViewBag.invoice.Customer.Opening_Balance</li>
                                                    <li id="customer_credit" class="hidden">@ViewBag.invoice.Customer.Credit</li>
                                                    <li id="customer_credit_limit" class="hidden">@ViewBag.invoice.Customer.Credit_Limit</li>
                                                </ul>
                                            </div>



                                            <div class="col-md-6 pull-left pl-0 pr-0">


                                                <div class="col-md-5">
                                                    <label><input type="checkbox" id="sold_history_checkbox" value="" />Check Sold History</label><br />
                                                    <label id="hideExcludeVat"><input type="checkbox" id="excludeVat" value="" onclick="excludeVatUnchecked();" />Exclude VAT</label>
                                                    <label hidden id="show_details"><input type="checkbox" id="show_details" value="" />Show Details</label>
                                                    @*<label><input type="checkbox" value="" />Show Details</label>*@
                                                </div>

                                                <div class="col-md-7 pl-0 pr-0">



                                                    <div class="clearfix"></div>

                                                    @if (@ViewBag.invoice.Document_Type.Id == 1) { 
                                                        <div class="form-group" id="invoice_number_div">
                                                            <label class="pull-left width-134" for="middle-name">Invoice Number</label>
                                                            <div class="pull-left" id="quote_to_invoice">
                                                                <input class="width-145 text-center" readonly value="@ViewBag.invoice.Invoice_Number" onkeypress="validate(event)" type="text" name="" id="invoice_number" required>
                                                            </div>
                                                        </div>
                                                    }
                                                    @if (@ViewBag.invoice.Document_Type.Id == 2) {
                                                        <div class="form-group" id="quote_number_div" style="display:none;">
                                                            <label class="pull-left width-134" for="middle-name">Quote Number</label>
                                                            <div class="pull-left">
                                                                <input class="width-145 text-center" type="text" onblur="checkQuoteNumber()" value="@ViewBag.invoice.Quote_Number" name="" id="quote_number" readonly>
                                                                @*<input class="width-145 text-center" type="text" readonly value="@ViewBag.invoice.Quote_Number" onblur="checkQuoteNumber()" name="" id="">*@
                                                            </div>
                                                        </div>
                                                    }
                                                    @if (@ViewBag.invoice.Document_Type.Id == 3) {
                                                        <div class="form-group" id="item_sale_div" style="display:none;">
                                                            <label class="pull-left width-134" for="middle-name">Item Sale Number</label>
                                                            <div class="pull-left">
                                                                <input class="width-145 text-center" type="text" onblur="checkItemSaleNumber()" value="@ViewBag.invoice.Item_Sale_Number" name="" id="item_sale_number" readonly>
                                                            </div>
                                                        </div>
                                                    }


                                                    <div class="form-group" id="invoice_number_max" style="display:none;">
                                                        <label class="pull-left width-134" for="middle-name">Invoice Number</label>
                                                        <div class="pull-left" id="quote_to_invoice">
                                                            <input class="width-145 text-center" readonly value="@ViewBag.invoice_number" onkeypress="validate(event)" type="text" name="invoice_number" id="invoice_number" required>
                                                        </div>
                                                    </div>
                                                    <div class="form-group" id="quote_number_max" style="display:none;">
                                                        <label class="pull-left width-134" for="middle-name">Quote Number</label>
                                                        <div class="pull-left">
                                                            <input class="width-145 text-center" type="text" onblur="checkQuoteNumber()" value="@ViewBag.quote_number" name="quote_number" id="quote_number" readonly>
                                                            @*<input class="width-145 text-center" type="text" readonly value="@ViewBag.invoice.Quote_Number" onblur="checkQuoteNumber()" name="" id="">*@
                                                        </div>
                                                    </div>
                                                    <div class="form-group" id="item_sale_max" style="display:none;">
                                                        <label class="pull-left width-134" for="middle-name">Item Sale Number</label>
                                                        <div class="pull-left">
                                                            <input class="width-145 text-center" type="text" onblur="checkItemSaleNumber()" value="@ViewBag.item_sale_number" name="item_sale_number" id="old_doc_1_new_3" readonly>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="clearfix"></div>


                                                    <div class="form-group">
                                                        <label class="pull-left width-134" for="middle-name">Date</label>
                                                        <div class="pull-left">
                                                            <input class="width-145 height-28" type="date" id="edit_date" name="invoice_date">
                                                        </div>
                                                    </div>

                                                    <div class="clearfix"></div>

                                                    <div class="form-group">
                                                        <label class="pull-left width-134" for="middle-name">Sales Person</label>
                                                        <div class="pull-left">
                                                            <input readonly class="width-145 text-center" type="text" name="company_name" id="company_name" value="Admin" required>
                                                        </div>
                                                    </div>

                                                    <div class="clearfix"></div>

                                                    <div class="form-group" id="payment_method_div">
                                                        <label class="pull-left width-134" for="middle-name">Payment Method</label>
                                                        <div class="pull-left">
                                                            <select name="payment_method_id" class="form-control border_black-1px width-145 select-class-color">
                                                                @foreach (var method in ViewBag.Payment_Method)
                                                                {

                                                                    <option value="@method.Type">@method.Type</option>
                                                                }

                                                            </select>
                                                        </div>
                                                    </div>

                                                    <div class="clearfix"></div>

                                                    <div class="form-group">
                                                        <label class="pull-left width-134" for="middle-name">Purchase Order No</label>
                                                        <div class="pull-left">
                                                            <input class="width-145 text-center" value="@ViewBag.invoice.Purchase_Order_Number" type="text" name="invoice_purchase_no" id="company_name" placeholder="N/A">
                                                        </div>
                                                    </div>

                                                    @*<a href="#" data-target="#Sold_History_Modal" data-dismiss="modal" data-toggle="modal">Sold History</a>*@
                                                </div>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>

                                    </div>
                                    <hr class="hr_customer" />


                                    <div class="col-md-12">


                                        <table border="0" class="table table-responsive border_black readonly_table_style" style="width:100%" id="maintable">
                                            <thead>
                                                <tr class="table-heading-fonts-new-invoice table-main-headings">
                                                    <th class="text-center">Code</th>
                                                    <th class="text-center width-53p">Description</th>
                                                    <th class="text-center">Quantity</th>
                                                    <th width="10%" class="text-center">Price</th>
                                                    <th id="" class="text-center priceVAT hidecolumn">Price+VAT</th>
                                                    <th width="2%" class="text-center">Total</th>
                                                    <th class="text-center priceVAT hidecolumn">Total+VAT</th>
                                                    <th class="text-center">Discount</th>
                                                    <th width="25%" class="text-center">Actions</th>

                                                </tr>
                                            </thead>

                                            @{
                                                var counter = 1;

                                            }

                                            @foreach (var obj in Model)
                                            {


                                                <tr id="@String.Concat("rowId"+counter)" class="font-15 id remove_div">

                                                    <td class="border-right-td">

                                                        <div class="text-center">

                                                            <input placeholder="Code" value="@obj.Sale.Product.Custom_Label_" class="yoyo unbold width-110 text-center"
                                                                   id="@String.Concat("codeforProduct",counter)" name="yoyoyoyoyoyoyoy"
                                                                   onkeyup="productList(event,this.value,@counter);Total(counter)" type="text">

                                                        </div>

                                                    </td>



                                                    <td class="border-right-td">

                                                        <textarea class="2 description-text-area unbold width-100p"
                                                                  id="@String.Concat("invoice_description",counter)"
                                                                  name="@String.Concat("invoice_description",counter)" required=""
                                                                  placeholder="Description">
                                                            @obj.Sale.Description
                                                        </textarea>

                                                    </td>

                                                    <td class="border-right-td">

                                                        <div class="text-center">

                                                            <input onkeypress="validate(event);" id="@String.Concat("invoice_quantity",counter)"
                                                                   onkeyup="Total(@counter);checkQuantityAvailable(this.value,@counter);" placeholder="0"
                                                                   class="3 unbold width-45 text-center" value="@obj.Sale.Quantity"
                                                                   name="@String.Concat("invoice_quantity",counter)" type="text">

                                                        </div>

                                                    </td>

                                                    <td class="border-right-td priceVAT">

                                                        <div class="text-center">

                                                            <input onkeypress="validate(event)" id="@String.Concat("invoice_price", counter)"
                                                                   onkeyup="Total(@counter)" placeholder="0.0" class="4 new-invoice-width-boxes unbold width-68 text-center"
                                                                   value="@obj.Sale.Price" name="@String.Concat("invoice_price", counter)" onkeyup="Total(@counter)" type="text">

                                                        </div>

                                                    </td>

                                                    <td class="border-right-td hidecolumn text-center">

                                                        <input onkeypress="validate(event)" id="@String.Concat("invoice_price_vat",counter)"
                                                               onkeyup="Total2(@counter)" placeholder="0.0" class="5 new-invoice-width-boxes unbold width-78 text-center"
                                                               value="@obj.Sale.PriceVAT" name="@String.Concat("invoice_price_vat",counter)" type="text">

                                                    </td>

                                                    <td class="border-right-td text-center priceVAT">

                                                        <input readonly id="@String.Concat("invoice_total",counter)" placeholder="0.0"
                                                               class="6 new-invoice-width-boxes unbold width-68 text-center priceVAT" name="@String.Concat("invoice_total",counter)" value="@obj.Sale.Total"
                                                               type="text">

                                                    </td>

                                                    <td class="border-right-td hidecolumn text-center">

                                                        <input readonly id="@String.Concat("invoice_total_vat",counter)"
                                                               placeholder="0.0" class="7 new-invoice-width-boxes unbold width-78 text-center"
                                                               value="@obj.Sale.Total_VAT" name="@String.Concat("invoice_total_vat",counter)" type="text">

                                                    </td>

                                                    @*<td class="text-center border-right-td width-68"><div id="@String.Concat("invoice_total",counter)" class="6 total_invoice_background text-center">£0</div></td>
                                                        <td class="border-right-td text-center width-78 hidecolumn"><div id="@String.Concat("invoice_total_vat",counter)" class="7 total_invoice_background text-center">£0</div></td>*@



                                                    <td class="border-right-td">

                                                        <div class="text-center">

                                                            <input onkeypress="validate(event)" onkeyup="Total(@counter);" id="@String.Concat("invoice_discount",@counter)"
                                                                   placeholder="0.0" class="8 unbold width-45 text-center" name="@String.Concat("invoice_discount",counter)"
                                                                   value="@obj.Sale.Discount" type="text">

                                                        </div>
                                                    </td>

                                                    <td class="hidden">

                                                        <input type="text" class="hidden" name="@String.Concat("invoice_product_id",counter)"
                                                               id="@String.Concat("invoice_product_id",counter)" value="@obj.Sale.Product_ID" />

                                                    </td>
                                                    <td class="text-center width-27p" style="vertical-align:middle;">
                                                        <a href="#" class="showdiv" onclick="addNewRow(@Model.Count()),rowcounterPlus()">
                                                            <img src="/img/images/plus_new_sale.png">
                                                        </a>
                                                        <a href="#" class="remove">
                                                            <img src="/img/images/cross_new_sale.png">
                                                        </a>
                                                        <a href="#">
                                                            <img src="/img/images/barcode_new_sale.png">
                                                        </a>
                                                        <a href="#">
                                                            <img src="/img/images/findpost.png" onclick="image_click(@counter)">
                                                        </a>
                                                    </td>

                                                    <input type="hidden" id="@String.Concat("total_hidden", counter)" name="@String.Concat("total_hidden", counter)" />
                                                    <input type="hidden" id="@String.Concat("total_vat_hidden", counter)" name="@String.Concat("total_vat_hidden", counter)" />

                                                </tr>
                                                counter = counter + 1;
                                            }

                                            <input type="hidden" id="rowNumber" value="@counter" />


                                            @for (int i = 1; i <= 1000; i++)
                                            {

                                                <tbody class="black-color" id="@String.Concat("newrow",i)"></tbody>
                                            }


                                            @*<input type="text" value="@ViewBag.Counter_Refund_Row" />*@




                                            @{
                                                int b = counter;
    //counter = counter + 1;
                                            }

                                            <tbody class="black-color bold" id="after_refund_tr" style="display:none">


                                                @for (var j = 1; j < 4; j++)
                                                {

                                                    <tr id="@String.Concat("rowId" + b)" class="font-15 id remove_div">

                                                        <td class="border-right-td">

                                                            <div class="text-center">

                                                                <input class="yoyo unbold width-110 text-center" readonly
                                                                       id="@String.Concat("code_after_refund", b)" name=""
                                                                       onkeyup="Total(counter)" type="text">

                                                            </div>

                                                        </td>



                                                        <td class="border-right-td">

                                                            <textarea class="2 description-text-area unbold width-100p" readonly
                                                                      id="@String.Concat("description_after_refund", b)" name=""></textarea>

                                                        </td>

                                                        <td class="border-right-td">

                                                            <div class="text-center">

                                                                <input onkeypress="validate(event);" id="@String.Concat("quantity_after_refund", b)"
                                                                       onkeyup="Total(@b);checkQuantityAvailable(this.value,@b);"
                                                                       class="3 unbold width-45 text-center" type="text" readonly>

                                                            </div>

                                                        </td>

                                                        @*//---------*@


                                                        <td class="border-right-td priceVAT">

                                                            <div class="text-center">

                                                                <input onkeypress="validate(event)" id="@String.Concat("price_after_refund", b)"
                                                                       readonly class="4 new-invoice-width-boxes unbold width-68 text-center" type="text">

                                                            </div>

                                                        </td>

                                                        <td class="border-right-td hidecolumn text-center">

                                                            <input onkeypress="validate(event)" id="@String.Concat("priceVat_after_refund", b)"
                                                                   onkeyup="Total2(@b)" placeholder="0.0" class="5 new-invoice-width-boxes unbold width-78 text-center"
                                                                   type="text" readonly>

                                                        </td>

                                                        <td class="border-right-td text-center priceVAT">

                                                            <input readonly id="@String.Concat("total_after_refund", b)" placeholder="0.0"
                                                                   class="6 new-invoice-width-boxes unbold width-68 text-center priceVAT"
                                                                   type="text">

                                                        </td>

                                                        <td class="border-right-td hidecolumn text-center">

                                                            <input readonly id="@String.Concat("totalVat_after_refund", b)"
                                                                   placeholder="0.0" class="7 new-invoice-width-boxes unbold width-78 text-center"
                                                                   type="text">

                                                        </td>

                                                        @*<td class="text-center border-right-td width-68"><div id="@String.Concat("invoice_total",counter)" class="6 total_invoice_background text-center">£0</div></td>
                                                            <td class="border-right-td text-center width-78 hidecolumn"><div id="@String.Concat("invoice_total_vat",counter)" class="7 total_invoice_background text-center">£0</div></td>*@



                                                        <td class="border-right-td">

                                                            <div class="text-center">

                                                                <input onkeypress="validate(event)" onkeyup="Total(@b);" id="@String.Concat("fdgg", @b)"
                                                                       placeholder="0.0" class="8 unbold width-45 text-center"
                                                                       type="text">

                                                            </div>
                                                        </td>


                                                        <td class="text-center width-27p" style="vertical-align:middle;">
                                                            <a href="#" class="showdiv" @*onclick="addNewRow(),rowcounterPlus()"*@>
                                                                <img src="/img/images/plus_new_sale.png">
                                                            </a>
                                                            <a href="#" class="remove" onclick="RemoveAddedRow(@b)">
                                                                <img src="/img/images/cross_new_sale.png">
                                                            </a>
                                                            <a href="#">
                                                                <img src="/img/images/barcode_new_sale.png">
                                                            </a>
                                                            <a href="#">
                                                                <img src="/img/images/findpost.png">
                                                            </a>
                                                        </td>

                                                        @*-----*@




                                                    </tr>
                                                    b = b + 1;


                                                }

                                            </tbody>

                                        </table>


                                        <div id="addedRows"></div>

                                        <div id="productList"> </div>

                                        <div class="clearfix"></div>
                                    </div>



                                    <div class="">

                                        <div class="col-md-4 unbold" style="width:29%">
                                            <textarea class="textarea-style-none unbold textarea-width" name="customer_notes" placeholder="Customer notes..."></textarea>
                                        </div>
                                        <div class="col-md-4 pl-0" style="width:29%">
                                            <textarea class="textarea-style-none unbold textarea-width" name="private_notes" placeholder="Private notes..."></textarea>
                                        </div>
                                        <div class="col-md-5 pl-0">
                                            <table id="table_cash" class="black-color col-md-12 border_black">
                                                <tr id="net_tr" class="hidecolumn">
                                                    <td class="bold">Net</td>
                                                    <td id="net_invoice" class="text-right">@ViewBag.invoice.Net_Price
                                                </tr>
                                                <tr id="vat_tr" class="hidecolumn">
                                                    <td class="bold">VAT(20%)</td>
                                                    <td id="invoice_vat" class="text-right">@ViewBag.invoice.VAT_20</td>
                                                </tr>



                                                <tr>
                                                    <td class="bold">Gross</td>
                                                    <td id="invoice_gross" class="text-right">@ViewBag.invoice.Gross</td>
                                                </tr>


                                                <tr class="discount_tr" style="display:none">
                                                    <td class="bold">Discount</td>
                                                    <td id="invoice_discount_td" class="text-right">@ViewBag.invoice.Global_Discount</td>
                                                </tr>
                                                <tr class="discount_tr hide_for_quote" style="display:none">
                                                    <td class="bold">Total After Discount</td>
                                                    <td id="invoice_after_discount_td" class="text-right">@ViewBag.invoice.Total_After_Discount</td>
                                                </tr>
                                                <tr id="payment_status_tr" class="hide_for_quote">
                                                    <td class="bold">Payment Status</td>
                                                    <td class="text-right">
                                                        <select id="payment_status_id" onchange="payment_status()" name="one" class="form-control border_black-1px min-height-32 width-180 select-class-color pull-right">
                                                            <option value="@ViewBag.invoice.Payment_Status.Id">@ViewBag.invoice.Payment_Status.Status</option>
                                                            @foreach (var status in ViewBag.Payment_Status)
                                                            {
                                                                if (ViewBag.invoice.Payment_Status.Id == status.Id)
                                                                {
                                                                    continue;
                                                                }
                                                                <option value="@status.Id">@status.Status</option>
                                                            }
                                                        </select>
                                                    </td>
                                                </tr>

                                                <input type="text"  id="payment_status_value_after_disabled" name="payment_status_value_after_disabled" hidden/>
                                                @*<tr class="">
                                                        <td class="bold"></td>
                                                        <td class=" bold text-center"><a href="#" data-target="#Give_Refund" data-toggle="modal">Give Refund</a></td>
                                                    </tr>*@
                                                @*     WITH GIVE REFUND
                                                    <tr>
                                                        <td class="text-center bold"><a href="#" data-target="#Give_Refund" data-toggle="modal">Give Refund</a></td>
                                                        <td></td>
                                                    </tr>

                                                           WITH GIVE REFUND       > *@
                                                <tr class="hide_for_quote hide_quotation">
                                                    <td class="bold text-center"><a hidden href="#" data-target="#Deposit_Modal" class="" id="Deposit_payment_option" data-toggle="modal">Deposit Payment</a></td>
                                                    <td class="bold text-center"><a href="#" class="" onclick="set_amount_left_in_partial_payment()" data-target="#Partial_Payment_Modal" id="partial_payment_option" data-toggle="modal">Add Partial Payment</a></td>
                                                </tr>

                                                <tr id="refund_tr" style="display:none" class="hide_for_quote">
                                                    @*<td class="">Refund<br /><span>03-08-17</span></td>
                                                        <td class=" bold pull-right">£100<br /><span>Cash</span></td>*@
                                                    <td class="">Refund <br /><span id="amount_refund_date_td"></span></td>
                                                    <td class="bold text-right" id="amount_refund_td"><br /><span class="mmm">sasas</span></td>
                                                </tr>



                                                @foreach (var v in @ViewBag.invoiceList)
                                                {
                                                    <tr class="partial_paid hide_for_quote">
                                                        <td class="" style="border-bottom:none!important">Partial Payment</td>
                                                        <td id="" class="text-right bold" style="border-bottom:none!important"><span>£</span>@v.Gross</td>
                                                    </tr>
                                                    sum = sum + @v.Gross;
                                                    <tr class="hide_for_quote">
                                                        <td class="" id="">@v.Created_at.ToShortDateString()</td>
                                                        <td id="" class="text-right bold">@v.Payment_Type</td>
                                                    </tr>

                                                }
                                                <input value="@sum" id="partial_payment_sum" hidden />

                                                @{
                                                    decimal balance = @ViewBag.invoice.Gross - sum;
                                                }

                                                <tr class="partial_paid hide_for_quote" style="display:none">
                                                    <td class="bold">Partial Payment</td>
                                                    <td id="partial_paid_td" class="text-right">£0</td>
                                                </tr>

                                                <tr class="deposit_paid hide_for_quote" style="display:none">
                                                    <td class="bold">Deposit Payment</td>
                                                    <td id="deposit_paid_td" class="text-right">£0</td>
                                                </tr>

                                                <tr class="partial_paid hide_for_quote" style="display:none">
                                                    <td class="bold" id="partial_date"></td>
                                                    <td id="partial_payment_method" class="text-right"></td>
                                                </tr>

                                                <tr id="custom_date_show_invoice" class="hide_for_quote" style="display:none">
                                                    <td class="bold width-134">Custom Date</td>
                                                    <td><input type="date" class="width-180" /></td>
                                                </tr>

                                                <tr id="Total_after_refund_tr" class="hide_for_quote" style="display:none">
                                                    <td class="bold">Total After Refunds:</td>
                                                    <td id="Total_after_refund_td" class="text-right">£0</td>
                                                </tr>

                                                
                                                <tr class="partial_paid deposit_paid hide_for_quote hide_quotation" style="">
                                                    <td class="bold">Amount left to Pay</td>
                                                    <td id="amount_left_td" class="text-right">@{@balance}</td>
                                                </tr>
                                                <input type="" value="@balance" id="amount_left_input_field" />


                                            </table>


                                            <div class="col-md-12 balance_div none displayDIV">

                                                <span class=" font-18 text-center red bold">Outstanding Balance</span>
                                                <br />
                                                <input type="text" readonly class="input_type_custom font-18" name="outstanding_balance" value="" id="outstanding_balance" />
                                                <br />
                                                <a href="#" class="btn btn-primary blue-btn-style btn-mini bold" data-target="#Outstanding_modal" data-toggle="modal">Pay Outstanding</a>
                                                <div class="empty-height"></div>
                                            </div>
                                        </div>

                                        <div class="clearfix"></div>

                                    </div>

                                    <div class="col-md-12">

                                        <div class="empty-height"></div><div class="empty-height"></div>
                                        <div class="col-md-6"></div>
                                        <div id="global_discount_div" class="col-md-3 pull-right">
                                            <div class="col-md-8"><a href="" class="btn btn-primary blue-btn-style btn-mini bold" data-toggle="modal" data-target="#Global_Discount_Modal">Add Global Discount</a></div>
                                        </div>
                                        <!-----------------------HIDING REFUND not COMPLETED-->
                                        @*<div id="Give_Refund_Div" class="col-md-2 pull-right mr--13">
                                            <a href="#" data-target="#Give_Refund" data-toggle="modal" onclick="give_refund_value_set()" class="btn btn-success blue-btn-style btn-mini bold">Give Refund</a>
                                        </div>*@


                                    </div>



                                </div>

                                <div class="col-md-12">
                                    <div class="col-md-5"></div>


                                    <div class="col-md-1 pr-0 text-center">
                                        <a>
                                            <span class=""><img src="~/img/images/save.png" /></span><br />
                                            <input type="submit" onclick="return submitResult();" value="Save" />

                                        </a>




                                    </div>

                                    <div class="col-md-1 text-center">
                                        <a href="~/Sale/New_Invoice">
                                            <span class=""><img src="~/img/images/exit.png" /></span><br />
                                            <input type="button" value="Exit" />


                                        </a>
                                    </div>
                                    <div class="col-md-5"></div>

                                </div>


                                <input id="counters" hidden value="" type="text" />
                                <input type="text" id="net_invoice_hidden" name="net_invoice_hidden" value="@ViewBag.invoice.Net_Price" hidden />
                                <input type="text" id="vat_invoice" name="vat_invoice_hidden" value="@ViewBag.invoice.VAT_20" hidden />
                                <input type="text" id="gross_invoice" name="gross_invoice_hidden" value="@ViewBag.invoice.Gross_Total" hidden />
                                <input type="text" class="" id="global_discount_hidden" name="global_discount_hidden" value="0" hidden />
                                <input type="text" class="" id="total_after_discount_hidden" name="total_after_discount_hidden" hidden />
                                <label>Left Amount Hidden</label>
                                <input type="text" class="" id="left_amount_hidden" name="left_amount_hidden" value="@ViewBag.invoice.Amount_Left"/>
                                <label>Amount Paid</label>
                                <input type="text" class="" id="amount_paid_hidden" name="amount_paid_hidden" value="@ViewBag.invoice.Amount_Paid"/>

                                @*<input id="refund_rows_count" type="text" />*@<input id="refund_rows_count" type="text" hidden/>

                                <input type="text" hidden name="old_document_type" id="doc_type_on_page_load_not_change" />
                                @*<label>Doc Type Page Load</label><input type="text"  name="doc_type_page_load" id="doc_type_page_load" />*@
                                <label hidden>Doc Type Page Load</label><input hidden type="text" name="doc_type_page_load" id="doc_type_page_load" value="@ViewBag.invoice.Doc_Type_ID" />
                                <label hidden>Doc Type Changed</label><input hidden type="text" name="new_document_type" id="new_document_type_changed" />
                                <input type="text" hidden name="refund_total_amount" id="refund_total_amount" />
                                <input type="text" hidden id="check_give_refund_value" />

                            </form>





                        </div>

                    </div>
                </div>

                @*-----------------Main Container Ends---------------*@
            </div>


            @*<div id="sticky-footer-push"></div>*@<div id="sticky-footer-push"></div>
        </div>
    </div>



    <footer class="black">

        @{
            Html.RenderPartial("Footer_View");
        }
    </footer>


    @*----------------------------POP UP FOR IMAGE CLICK--------------------------------*@

    <div class="modal fade" id="Image_Modal" tabindex="-1" role="dialog" aria-hidden="false">
        <div class="modal-dialog modal-md">
            <div class="modal-content modal-style-custom" style="height:540px;width:600px">

                <div class="title col-md-12">
                    <span>View Image</span>
                    <img src="~/img/images/cross_new_sale.png" class="close mr--13 pull-right" data-dismiss="modal" onclick="close_image_modal()" />
                </div>

                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel mt-20">
                        <div id="updated_div" class="win text-center"></div>
                    </div>
                </div>

                <div class="modal-footer"></div>
                <div class=""></div>

            </div>
        </div>
    </div>
    @*----------------------------POP UP END IMAGE CLICK--------------------------------*@


    @*-------------------------------POP UP FOR REFUND----------------------------------*@

    <div class="modal fade" id="Give_Refund" tabindex="-1" role="dialog" aria-hidden="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content modal-style-custom">

                <div class="title col-md-12">
                    <span>Message</span>
                    <img src="~/img/images/c3.png" class="close mr--13 pull-right" data-dismiss="modal" />
                </div>

                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel">

                        <div class="empty-height"></div><div class="empty-height"></div>

                        <div class="win text-center">
                            <h3 class="color"><b>Refund an item</b></h3>

                            <div class="empty-height"></div><div class="empty-height"></div>

                            <table class="table table-responsive border_black" id="customer_list_table">
                                <thead>
                                    <tr class="table-heading-fonts table-main-headings readonly_table_style">
                                        <th class="text-center"></th>
                                        <th class="text-center">SKU</th>
                                        <th class="text-center">Title</th>
                                        <th class="text-center">QTY</th>
                                        <th hidden class="text-center">Price</th>
                                        <th hidden class="text-center">Price+Vat</th>
                                        <th hidden class="text-center">Total</th>
                                        <th  class="text-center">Total+Vat</th>
                                    </tr>
                                </thead>

                                <tbody class="black-color bold" id="updated_customer_list">

                                    @{
                                        int a = 1;
                                    }

                                    @foreach (var obj in Model)
                                    {

                                        <tr class="font-15 id remove_div">

                                            <td class="text-center border-right-td">
                                                <div class="text-center">
                                                    <input placeholder="0" class="unbold text-center font-18" id="@String.Concat("checkbox_id",a)" type="checkbox">
                                                </div>
                                            </td>

                                            <td class="border-right-td width-180">

                                                <div class="text-center">
                                                    <input placeholder="Code" value="@obj.Sale.Product.Custom_Label_" class="unbold width-160 text-center" type="text"
                                                           id="@String.Concat("ref_sku",a)">
                                                </div>

                                            </td>


                                            <td class="border-right-td">

                                                <textarea class="2 description-text-area unbold width-100p"
                                                          placeholder="Description" id="@String.Concat("ref_description",a)">
                                                    @obj.Sale.Description
                                                </textarea>

                                            </td>

                                            <td class="border-right-td width-134">

                                                <div class="text-center">

                                                    <input onkeypress="validate(event);" id="@String.Concat("ref_quantity",a)"
                                                           onkeyup="Total_Refund(a);" placeholder="0"
                                                           class="3 unbold width-72 text-center" value="@obj.Sale.Quantity" type="text">

                                                </div>

                                            </td>

                                            <td class="border-right-td" hidden>

                                                <div class="text-center">
                                                    <input placeholder="Code" value="@obj.Sale.Price" class="unbold width-110 text-center"
                                                           type="text" id="@String.Concat("ref_price",a)">
                                                </div>

                                            </td>

                                            <td class="border-right-td" hidden>

                                                <div class="text-center">
                                                    <input placeholder="Code" value="@obj.Sale.PriceVAT" class="unbold width-110 text-center"
                                                           type="text" id="@String.Concat("ref_pricevat",a)">
                                                </div>

                                            </td>

                                            <td class="border-right-td" hidden>

                                                <div class="text-center">
                                                    <input placeholder="Code" value="@obj.Sale.Total" class="unbold width-110 text-center"
                                                           type="text" id="@String.Concat("ref_total",a)">
                                                </div>

                                            </td>

                                            <td class="border-right-td" >

                                                <div class="text-center">
                                                    <input value="@obj.Sale.Total_VAT" class="unbold width-110 text-center"
                                                           type="text" id="@String.Concat("ref_totalVat",a)">
                                                </div>

                                            </td>

                                        </tr>

                                        a = a + 1;

                                    }


                                </tbody>


                            </table>




                            <div class="col-md-12">

                                <div>

                                    <div class="col-md-3"></div>



                                    <div class="col-md-3 pull-left">
                                        <a class="btn btn-success blue-btn-style btn-mini bold width-145 " onclick="checkboxes_function()">
                                            Ok
                                        </a>
                                    </div>

                                    <div class="col-md-3 pull-left">
                                        <a class="btn blue-btn-style btn_logout_session_expire bold width-145" data-dismiss="modal">
                                            Cancel
                                        </a>
                                    </div>

                                </div>

                                <div class="col-md-3"></div>

                                <div class="clearfix"></div>
                            </div>

                            <script>
                                function checkboxes_function() {
                                    var total = 0;
                                    var table_count = $("#rowNumber").val();
                                    var table_plus_plus = table_count;
                                    var count = 0;
                                    //alert(table_count);

                                    for (i = 1; i < table_count; i++) {
                                        //alert("FOR  " + i);
                                        if (document.getElementById("checkbox_id" + i).checked) {
                                            //alert("IF");
                                            var sku = $("#ref_sku" + i).val();
                                            var descriptions = $("#ref_description" + i).val();
                                            var quantum = $("#ref_quantity" + i).val();
                                            var negative_quantity = quantum * (-1);
                                            //alert("BEFORE");

                                            var pricee = $("#ref_price" + i).val();
                                            var priceeVAT = $("#ref_priceVat" + i).val();
                                            var Totall = $("#ref_total" + i).val();
                                            var TotallVAT = $("#ref_totalVat" + i).val();
                                            
                                            //var abc = $("#aaa" + i).val();

                                            //alert("abc " + abc);


                                            //alert("TotallVAT " + TotallVAT);

                                            total = +total + +TotallVAT;
                                            //alert("total " + total);

                                            var negative_total = Totall * (-1);
                                            var negative_totalVat = TotallVAT * (-1);

                                            //alert(" sku   "+sku+"descriptions    "+descriptions+"quantum_minus    "+quantum_minus);



                                            $("#code_after_refund" + table_plus_plus).val(sku);
                                            $("#description_after_refund" + table_plus_plus).val(descriptions);
                                            $("#quantity_after_refund" + table_plus_plus).val(negative_quantity);

                                            $("#price_after_refund" + table_plus_plus).val(pricee);
                                            $("#priceVat_after_refund" + table_plus_plus).val(priceeVAT);
                                            $("#total_after_refund" + table_plus_plus).val(negative_total);
                                            $("#totalVat_after_refund" + table_plus_plus).val(negative_totalVat);

                                            count = +count + +1;

                                            table_plus_plus = +table_plus_plus + +1;
                                        }


                                    }
                                    //b = table_count + 1;



                                    //alert("Count " + count);
                                    @*@{kamran = counter}*@

                                    //$('#cvcv').replaceWith("for (var j = 1; j <" + count+ "; j++)");




                                    if (count == null || count == 0) {

                                        swal({
                                            title: "NO ITEM SELECTED",
                                            text: "Please Select an Item to Refund",
                                            type: "warning",
                                            confirmButtonColor: '#DD6B55',
                                            confirmButtonText: 'Okay',
                                        })

                                        return false;
                                    }

                                    var total_fixed = total.toFixed(2);

                                    $("#refund_total_amount").val(total_fixed);
                                    $("#refund_amount").val(total_fixed);
                                    //alert("total " + total_fixed);
                                    //alert("counter" + count);
                                    $("#Give_Refund").hide();
                                    $("#after_refund_tr").show();

                                    //alert($("#invoice_gross").html());

                                    $("#Refund_Amount_Modal").addClass("in").show("slow");
                                    //ajax_call_for_count_refund();
                                }


                                function ajax_call_for_count_refund() {

                                    var value = $("#refund_rows_count").val();
                                    //alert("VALUE  " + value);
                                    $.ajax({

                                        url: "/Sale/Value_Refund_Counter/",
                                        data: { counter: value },
                                        cache: false,
                                        type: "Get",
                                        success: function (data) {

                                            alert(data);

                                        },
                                        error: function (response) {
                                            alert("Error" + response);
                                        }

                                    })

                                }

                            </script>
                        </div>
                    </div>
                </div>

                <div class="modal-footer"></div>
                <div class=""></div>

            </div>
        </div>
    </div>

    @*-------------------------------POP UP FOR REFUND----------------------------------*@


    @*----------------------------POP UP FOR REFUND AN ITEM AMOUNT MODAL--------------------------------*@

    <div class="modal fade closeee" id="Refund_Amount_Modal" tabindex="-1" role="dialog" aria-hidden="false">
        <div class="modal-dialog modal-md">
            <div class="modal-content modal-style-custom">

                <div class="title col-md-12">
                    <span>Message</span>
                    <img src="~/img/images/c3.png" class="close mr--13 pull-right" data-dismiss="modal" onclick="close_modal_refund()" />
                </div>

                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel">

                        <div class="win text-center">
                            <h3 class="color"><b>Refund an Item</b></h3>

                            <div class="empty-height"></div><div class="empty-height"></div>






                            <div class="empty-height"></div>

                            <div class="col-md-12">
                                <div class="col-md-12">
                                    <div class="col-md-2"></div>
                                    <div class="form-group col-md-9">
                                        <label class="pull-left text-left width-145 font-16" for="middle-name">Amount</label>
                                        <div class="col-md-3 col-sm-6 col-xs-12 pull-left">
                                            <input class="width-145" type="text" onkeypress="validate(event)" name="refund_amount" id="refund_amount">
                                        </div>
                                    </div>

                                </div>

                                <div class="clearfix"></div>

                                <div class="col-md-12">
                                    <div class="col-md-2"></div>
                                    <div class="form-group col-md-9 mt-10">
                                        <label class="pull-left text-left width-145 font-16" for="middle-name">Date</label>
                                        <div class="col-md-3 col-sm-6 col-xs-12 pull-left">
                                            <input required type="date" id="date_refund" class="height-28 width-145" name="from_date">
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>

                                <div class="col-md-12">
                                    <div class="col-md-2"></div>
                                    <div class="form-group col-md-9 mt-10">
                                        <label class="pull-left text-left width-145 font-16 mt-5" for="middle-name">Payment Method</label>
                                        <select name="payment_refund_id" id="payment_method_refund_id" oninput="payment_method_refund()" class="form-control border_black-1px width-145 ml-15 select-class-color pull-left">
                                            @foreach (var method in ViewBag.Payment_Method)
                                            {
                                                <option value="@method.Id">@method.Type</option>
                                            }
                                        </select>
                                    </div>
                                </div>

                                @*<div class="text-center">
                                    <input placeholder="0" class="unbold text-center font-18" id="@String.Concat("checkbox_id",a)" type="checkbox">
                                    </div>*@@*<div class="text-center">
                                    <input placeholder="0" class="unbold text-center font-18" id="@String.Concat("checkbox_id",a)" type="checkbox">*@
                                </div>

                                <div class="">
                                    <label class="" style="color: #73879C;">
                                        <input id="handling_fee_checkbox" onclick="handling_fee()" type="checkbox">
                                        Take 20% Handling Fee
                                    </label>
                                </div>

                                <div class="clearfix"></div>

                            </div>

                            <div class="clearfix"></div>

                            <div class="empty-height"></div><div class="empty-height"></div>

                            <div class="col-md-12">

                                <div class="col-md-2"></div>
                                <div class="col-md-4">
                                    <input type="button" onclick="Refund_Payment_Amount()" value="Add" class="btn btn-success btn-mini center-block width-145" />
                                </div>

                                <div class="col-md-4">
                                    @*<a href="" data-dismiss="modal" class="btn btn-primary btn-mini width-80 center-block height-40 mt-0">Cancel</a>*@@*<a href="" data-dismiss="modal" class="btn btn-primary btn-mini width-80 center-block height-40 mt-0"></a>*@
                                    <input type="button" data-dismiss="modal" value="Cancel" class="btn btn-primary btn-mini center-block width-145" onclick="close_modal_refund()" />
                                </div>
                                <div class="col-md-2"></div>



                            </div>

                        </div>
                    </div>
                </div>

                <div class="modal-footer"></div>
                <div class=""></div>

            </div>
        </div>
    </div>


    @*----------------------------POP UP FOR REFUND AN ITEM AMOUNT MODAL--------------------------------*@




    @*----------------------------POP UP FOR SOLD HISTORY--------------------------------*@

    <div class="modal fade close_modal" id="Sold_History_Modal" tabindex="-1" role="dialog" aria-hidden="false">
        <div class="modal-dialog modal-md">
            <div class="modal-content modal-style-custom">

                <div class="title col-md-12">
                    <span>Message</span>
                    <img src="~/img/images/c3.png" class="close mr--13 pull-right" data-dismiss="" onclick="close_modal()" />
                </div>

                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel">

                        <div id="soldHistory" class="win text-center">
                            <h3 class="color"><b>Previous Price Offered</b></h3>

                            <div class="empty-height"></div><div class="empty-height"></div>







                            <div class="empty-height"></div>






                            <div class="col-md-12">
                                <table class="table table-responsive border_black" id="customer_list_table">
                                    <thead>
                                        <tr class="table-heading-fonts table-main-headings">
                                            <th class="text-center"></th>
                                            <th class="text-center">Price</th>
                                            <th class="text-center">VAT</th>
                                            <th class="text-center">Price+VAT</th>
                                            <th class="text-center">Date</th>
                                        </tr>
                                    </thead>

                                    <tbody class="black-color bold text-center" id="updated_customer_list">


                                        <tr>
                                            <td data-title="User ID"></td>
                                            <td data-title="User ID"></td>
                                            <td></td>
                                            <td data-title="Last Name"></td>
                                            <td data-title="Email" class="user-emails"></td>

                                        </tr>

                                    </tbody>


                                </table>
                            </div>


                            <div class="col-md-12">
                                <div class="col-md-3"></div>


                                <div class="col-md-3"></div>



                            </div>


                        </div>
                    </div>
                </div>

                <div class="modal-footer"></div>
                <div class=""></div>

            </div>
        </div>
    </div>
    @*----------------------------POP UP END SOLD HISTORY--------------------------------*@



    @*----------------------------POP UP FOR DEPOSIT PAYMENT--------------------------------*@

    <div class="modal fade" id="Deposit_Modal" tabindex="-1" role="dialog" aria-hidden="false">
        <div class="modal-dialog modal-sm">
            <div class="modal-content modal-style-custom">

                <div class="title col-md-12">
                    <span>Message</span>
                    <img src="~/img/images/c3.png" class="close mr--13 pull-right" data-dismiss="modal" />
                </div>

                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel">

                        <div class="win text-center">
                            <h3 class="color"><b>Add Deposit Payment</b></h3>

                            <div class="empty-height"></div><div class="empty-height"></div>






                            <div class="empty-height"></div>

                            <div class="col-md-12">

                                <div class="form-group pull-left">
                                    <label class="pull-left text-left width-72 font-16" for="middle-name">Amount</label>
                                    <div class="col-md-3 col-sm-6 col-xs-12">
                                        <input class="width-145" type="text" onkeypress="validate(event)" required name="deposit" id="partial_amount_deposit">
                                    </div>
                                </div>




                                <div class="form-group pull-left">
                                    <label class="pull-left text-left width-72 font-16" for="middle-name">Payment Method</label>
                                    <select name="payment_method_id" class="form-control border_black-1px width-145 ml-15 select-class-color pull-left">
                                        <option value="@ViewBag.invoice.Payment_Methods.Id">@ViewBag.invoice.Payment_Methods.Type</option>
                                        @foreach (var method in ViewBag.Payment_Method)
                                        {
                                            if (@method.Id == @ViewBag.invoice.Payment_Methods.Id)
                                            {
                                                continue;
                                            }
                                            <option value="@method.Id">@method.Type</option>
                                        }

                                    </select>
                                </div>


                            </div>
                            <div class="col-md-12">
                                <div class="col-md-1"></div>

                                <div class="col-md-5">
                                    <input type="button" onclick="Deposit_Payment()" data-dismiss="modal" value="Add" class="btn btn-success btn-mini center-block width-80" />
                                </div>

                                <div class="col-md-5">
                                    <a href="" data-dismiss="modal" class="btn btn-primary btn-mini width-80 center-block height-40 mt-0">Cancel</a>
                                </div>
                                <div class="col-md-1"></div>



                            </div>






                        </div>
                    </div>
                </div>

                <div class="modal-footer"></div>
                <div class=""></div>

            </div>
        </div>
    </div>


    @*----------------------------POP UP END DEPOSIT PAYMENT--------------------------------*@






    @*----------------------------POP UP FOR PARTIAL PAYMENT--------------------------------*@

    <div class="modal fade" id="Partial_Payment_Modal" tabindex="-1" role="dialog" aria-hidden="false">
        <div class="modal-dialog modal-sm">
            <div class="modal-content modal-style-custom">

                <div class="title col-md-12">
                    <span>Message</span>
                    <img src="~/img/images/c3.png" class="close mr--13 pull-right" data-dismiss="modal" onclick="close_partial_payment_modal()" />
                </div>

                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel">

                        <div class="win text-center">
                            <h3 class="color"><b>Add Partial Payment</b></h3>

                            <div class="empty-height"></div><div class="empty-height"></div>






                            <div class="empty-height"></div>

                            <div class="col-md-12">

                                <div class="form-group pull-left">
                                    <label class="pull-left text-left width-72 font-16" for="middle-name">Amount</label>
                                    <div class="col-md-3 col-sm-6 col-xs-12">
                                        <input class="width-145" type="text" onkeypress="validate(event)" name="partial_amount" id="partial_amount">



                                    </div>
                                </div>





                                <div class="form-group pull-left">
                                    <label class="pull-left text-left width-72 font-16" for="middle-name">Payment Method</label>
                                    <select name="payment_method_id" class="form-control border_black-1px width-145 ml-15 select-class-color pull-left">
                                        @foreach (var method in ViewBag.Payment_Method)
                                        {
                                            <option value="@method.Id">@method.Type</option>
                                        }

                                    </select>
                                </div>


                            </div>
                            <div class="col-md-12">
                                <div class="col-md-1"></div>

                                <div class="col-md-5">
                                    <input type="button" onclick="Partial_Payment()" data-dismiss="modal" value="Add" class="btn btn-success btn-mini center-block width-80" />
                                </div>

                                <div class="col-md-5">
                                    <a href="#" data-dismiss="modal" onclick="close_partial_payment_modal()" class="btn btn-primary btn-mini width-80 center-block height-40 mt-0">Cancel</a>
                                </div>
                                <div class="col-md-1"></div>



                            </div>







                        </div>
                    </div>
                </div>

                <div class="modal-footer"></div>
                <div class=""></div>

            </div>
        </div>
    </div>


    @*----------------------------POP UP END PARTIAL PAYMENT--------------------------------*@



    @*----------------------------POP UP FOR OUTSTANDING--------------------------------*@


    <div class="modal fade" id="Outstanding_modal" tabindex="-1" role="dialog" aria-hidden="false">
        <div class="modal-dialog modal-md">
            <div class="modal-content modal-style-custom">

                <div class="title col-md-12">
                    <span>Message</span>
                    <img src="~/img/images/c3.png" class="close mr--13 pull-right" data-dismiss="modal" />
                </div>

                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel">

                        <div class="win text-center">


                            <div class="empty-height"></div><div class="empty-height"></div>

                            <p class="bold">Are you sure do you wish to pay all outstanding payment</p>



                            <div class="col-md-12">
                                <div class="col-md-1"></div>
                                <div class="form-group pull-left">
                                    <label class="control-label pull-left mt-5">Pay Amount</label>
                                    <input id="outstanding_amount" class="form-control pull-left width-80 ml-5" type="text" name="outstanding_amount" placeholder="0.0" required>
                                </div>


                                <div class="pull-left">
                                    <label class="control-label pull-left mt-5 ml-15 mr-7">Pay Method</label>

                                    <select name="payment_method_id" class="form-control border_black-1px width-145 select-class-color">
                                        @foreach (var method in ViewBag.Payment_Method)
                                        {
                                            <option value="@method.Id">@method.Type</option>
                                        }

                                    </select>
                                </div>

                                <div class="col-md-2"></div>

                                <div class="clearfix"></div>

                            </div>

                            <div class="col-md-12">
                                <div class="col-md-3"></div>

                                <div class="col-md-3">
                                    <input type="submit" data-dismiss="modal" onclick="outstanding_balance_function()" value="Pay" class="btn btn-success btn-mini center-block width-123" />
                                </div>

                                <div class="col-md-3">
                                    <a data-dismiss="modal" class="btn btn-primary btn-mini width-123 center-block a-cancel height-40 mt-0">Cancel</a>
                                </div>
                                <div class="col-md-3"></div>



                            </div>






                        </div>
                    </div>
                </div>

                <div class="modal-footer"></div>
                <div class=""></div>

            </div>
        </div>
    </div>


    @*----------------------------POP UP END OUTSTANDING--------------------------------*@


    @*----------------------------POP UP FOR GLOBAL DISCOUNT--------------------------------*@

    <div class="modal fade" id="Global_Discount_Modal" tabindex="-1" role="dialog" aria-hidden="false">
        <div class="modal-dialog modal-sm">
            <div class="modal-content modal-style-custom">

                <div class="title col-md-12">
                    <span>Prompt</span>
                    <img src="~/img/images/c3.png" class="close mr--13 pull-right" data-dismiss="modal" />
                </div>

                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel">

                        <div class="win text-center">
                            @*<h3 class="color"><b>Find Customer</b></h3>*@<h3 class="color"><b></b></h3>

                            <div class="empty-height"></div><div class="empty-height"></div>




                            <label class="bold">Please Enter Discount Price</label>
                            <input type="text" name="discount_value" id="discount_value" required />

                            <div class="empty-height"></div>

                            <div class="col-md-12">
                                <div class="col-md-1"></div>

                                <div class="col-md-9">
                                    <input data-dismiss="modal" type="button" onclick="global_discount()" value="Ok" class="btn btn-success btn-mini center-block width-123" />
                                </div>

                                <div class="col-md-2"></div>



                            </div>

                        </div>
                    </div>
                </div>

                <div class="modal-footer"></div>
                <div class=""></div>

            </div>
        </div>
    </div>


    @*----------------------------POP UP END GLOBAL DISCOUNT--------------------------------*@




@*----------------------------POP UP EXISTING CUSTOMER--------------------------------*@

@{
    Html.RenderPartial("Customer_Modal/Existing_Customer_Modal");
}

@*----------------------------POP UP END EXISTING CUSTOMER--------------------------------*





    @*----------------------------POP UP ADD CUSTOMER--------------------------------*@


    @{
        Html.RenderPartial("Customer_Modal/Add_New_Customer_Modal");
    }

    @*----------------------------POP UP END ADD CUSTOMER--------------------------------*@


    @{
        counter = counter - 1;
    }

    <input type="hidden" name="totalRows" value="@counter" id="rowCounterrr" />
    <input type="hidden" value="@counter" id="ApnaApnaRowNumber" />



    @*----------------------------POP UP EDIT CUSTOMER--------------------------------*@

    @{
        Html.RenderPartial("Customer_Modal/Edit_Customer_Modal_Shared");
    }

    @*----------------------------POP UP END EDIT CUSTOMER--------------------------------*@


    @*----------------------------POP UP for POSTCODE CONFIRMATION--------------------------------*@

    @{
        Html.RenderPartial("Customer_Modal/Add_Customer_Postcode");
    }

    @*----------------------------POP UP END for POSTCODE CONFIRMATION--------------------------------*@

    <script src="~/Scripts/Sale/Edit_Sale.js"></script>
    <script src="~/Scripts/new-js/jquery-1.11.1.min.js"></script>
    <script src="~/Scripts/new-js/jquery.datatables.min.js"></script>
    <script src="~/Scripts/Common_JS_Functions/Common_JS.js"></script>

    <script src="~/Scripts/Postcode_Customer/Add_Customer_Postcode.js"></script>
    <script src="~/Scripts/Postcode_Customer/Edit_Customer_Postcode.js"></script>



</body>